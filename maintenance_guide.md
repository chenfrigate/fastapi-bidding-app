# 报价决策评估系统维护说明

## 一、系统概述

本系统是一个报价决策评估工具，旨在帮助用户在招投标过程中，在不清楚对手报价的情况下，通过科学计算获取最优报价策略，提高中标概率。

### 业务问题
用户在不清楚对手报价的情况下，无法确保自己的报价是最优的。

### 技术难点
对手报价的可能性很多，对每一种可能性反算自己的报价得分，又要调整伙伴的报价，计算量特别大，手算不现实。

### 解决方案
- 使用蒙特卡洛方法搜索对手出价空间，每次取样10万个
- 采用贝叶斯优化搜索我方出价空间，迭代计算获取我方的最优报价

### 落地效果
用户使用系统经过反复测算，按系统给出的最优报价投标，在对手超低价的情况下，仍然实现了本方报价分第一的效果。

## 二、系统架构与技术栈

- **后端框架**：FastAPI
- **语言**：Python
- **核心算法**：蒙特卡洛模拟、贝叶斯优化
- **部署平台**：Render
- **Web服务器**：Uvicorn

## 三、部署信息

### 公网访问
- 应用地址：`https://fastapi-quotes.onrender.com/`

### Render平台管理
- 管理员入口：`https://dashboard.render.com/web/srv-d0glrdruibrs73fo97n0/settings`（谷歌账号登陆）
- Build Command：`pip install -r requirements.txt`
- Start Command：`uvicorn main:app --host 0.0.0.0 --port 10000`
- Deploy Hook：`https://api.render.com/deploy/srv-d0glrdruibrs73fo97n0?key=8EdyGR6Xlcs`

### 代码仓库
- GitHub地址：`https://github.com/chenfrigate/fastapi-bidding-app`
- 分支：main

## 四、系统功能说明

### 核心功能
1. **计算最优报价**：基于用户输入参数，通过贝叶斯优化算法计算最优报价策略
2. **计算报价胜率**：模拟10万次对手报价场景，评估用户指定报价的胜率
3. **采样结果可视化**：展示模拟计算结果，胜利行以绿色字体突出显示
4. **用户说明文档**：提供系统使用指南，包括功能说明、计算规则等

### 关键参数说明
- 投标预算：项目总预算金额
- 基准价计算规则：根据不同地区/行业的评标规则设置
- 评分函数：根据投标文件要求设置的价格评分标准
- 对手数量：参与投标的竞争对手数量
- 成本价：本方项目成本

## 五、维护指南

### 1. 环境配置
- Python 3.9+ 环境
- 依赖包安装：`pip install -r requirements.txt`
- 本地开发启动：`uvicorn main:app --reload`

### 2. 常见问题排查

#### 2.1 服务器启动失败
- 检查requirements.txt中的依赖是否完整
- 确认Uvicorn命令参数正确
- 查看Render平台日志获取具体错误信息

#### 2.2 计算结果异常
- 检查输入参数是否合理
- 验证评分函数逻辑是否符合当前招标规则
- 确认蒙特卡洛模拟样本量（建议不少于10万次）

#### 2.3 页面显示问题
- 清除浏览器缓存后重试
- 检查JavaScript代码是否正常运行
- 确认HTML结构和CSS样式是否正确

### 3. 更新与部署流程

1. **代码修改**
   - 在本地开发环境修改代码
   - 测试功能正常后提交到GitHub仓库

2. **自动部署**
   - 代码推送到GitHub main分支后，Render平台会自动触发部署
   - 也可通过Deploy Hook手动触发部署

3. **部署验证**
   - 检查Render平台部署日志
   - 访问公网地址验证功能是否正常

## 六、文件结构说明

```
fastapi-bidding-app/
├── main.py              # 主程序文件，包含API路由和核心逻辑
├── requirements.txt     # 项目依赖配置
├── render.yaml          # Render平台配置文件
├── user_guide.html      # 用户说明文档
├── maintenance_guide.md # 维护说明文档
└── venv/                # Python虚拟环境（已在.gitignore中忽略）
```

## 七、扩展开发说明

### 1. 调整评分函数
- 根据不同地区/行业的评标规则，修改`main.py`中的评分函数逻辑
- 确保评分规则与招标文件要求完全一致

### 2. 优化算法参数
- 调整蒙特卡洛模拟的样本数量（默认10万次）
- 优化贝叶斯优化的迭代次数和收敛条件

### 3. 增加新功能
- 可考虑添加历史数据分析功能
- 增加更多可视化图表展示分析结果
- 添加导出分析报告功能

## 八、联系信息

如有系统维护问题，请联系系统管理员。